{# Load the tag library #}
{% extends 'base.html' %}
{% load bootstrap3 %}

{# Load CSS and JavaScript #}
{% bootstrap_css %}
{% bootstrap_javascript %}

{# Display django.contrib.messages as Bootstrap alerts #}
{% bootstrap_messages %}
<!DOCTYPE html>
<html lang="en">
{% block page-content %}
    <body background="/static/20171116192242.jpg">
    <div class="container">
        <div class="row clearfix">
            <div class="col-md-12 column">
                <br> <br> <br> <br>
                <h3 class="text-center">
                    沐融部署工具
                </h3>
                <form class="form-horizontal" action="/upload/" method="post" role="form" enctype="multipart/form-data">
                    <br><br><br>
                    <p style="width: 20%;margin: 0 auto;">
                        <label for="exampleInputFile">目标：</label>
                        <select name="server" class="selectpicker">
                            <option value="unknown">请选择</option>
                            {% for row in  permissions %}
                                <option value="{{ row }}">{{ row }}</option>
                            {% endfor %}
                        </select>
                        <br><br><br>

                        <label for="exampleInputFile">选择要部署的包：</label>
                    </p>
                    <div class="overlay"></div>
                    <!--模态框-->
                    <div id="modal" class="dropbox">
                        <div class="items-container">
                            <div id="close" style="cursor:pointer;float: right;width:20px">
                                <span class="css-close"></span>
                            </div>
                            <div>
                                <p class="head"><b>拖拽文件至此</b></p>
                                <div class="content" id="content">
                                    <table class="table">
                                        <tbody class="tbody"></tbody>
                                    </table>
                                </div>
                                <div class="footer">
                                    <button class="btn" onclick="upload()">开始上传</button>
                                </div>
                                <a href='#' onclick='clearAll()'
                                   style='position:absolute;bottom:10px;right:30px;'>清空所有</a>
                            </div>
                        </div>
                    </div>
                    <!--页面内容-->
                    <div style="margin-top:40vh;text-align: center;">
                        <p>拖拽上传演示模板。点击下方按钮，弹出模态框</p>
                        <button class="btn" onclick="showModal()">点击上传</button>
                    </div>
                    <!--嵌入脚本-->
                    <script src="jquery-1.10.2.js" type="text/javascript"></script>
                    <script src="demo.js" type="text/javascript"></script>
                    <p class="help-block" style="width: 20%;margin: 0 auto;">
                        <br><br>

                        <button type="submit" value="Upload" name="upload" class="btn btn-danger">Upload</button>
                        <span style="color: red">{{ error_msg }}</span>
                    </p>
                </form>
                <p class="text-center text-info">
                    <em>提示：</em> 点击"Upload"后，包中文件将直接覆盖到目标服务器， <strong>请谨慎检查包中文件</strong>
                    <small></small>
                </p>
            </div>
            <div class="col-md-12 column">
                <br>
                <form action="/upload/" method="get" role="form">
                    <p style="width: 20%;margin: 0 auto;">
                        <button type="submit" value="back" name="back" class="btn btn-lg btn-default">回到主页</button>
                    </p>
                </form>
            </div>
        </div>
    </div>
    </body>
{% endblock %}